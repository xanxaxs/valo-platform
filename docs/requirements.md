# Valorant チーム運営プラットフォーム - 要件定義書

## ドキュメント情報
- **作成日**: 2025-11-15
- **バージョン**: 1.0
- **ステータス**: 初期要件定義

---

## 1. プロジェクト概要

### 1.1 目的
アマチュアValorantチーム向けの、目標・戦績・スケジュールを一元管理できるWebプラットフォームを開発する。

### 1.2 ターゲットユーザー
- アマチュアValorantチーム
- プレイヤー、コーチ、マネージャー
- 1ユーザーが複数チームに所属可能

### 1.3 プラットフォーム
- Webアプリケーション（レスポンシブ対応）

---

## 2. ユーザーロールと権限

### 2.1 ロール定義

| ロール | 説明 | 主な権限 |
|--------|------|---------|
| **チームオーナー** | チームの最高管理者 | すべての機能にアクセス可能、チーム削除権限 |
| **マネージャー** | チーム運営管理者 | メンバー管理、スケジュール管理、目標設定 |
| **コーチ** | 選手指導担当 | フィードバック投稿、個人分析閲覧、戦績閲覧 |
| **プレイヤー** | チームメンバー | 自分のデータ閲覧・編集、スケジュール確認 |
| **サブメンバー** | サブスティチュート | プレイヤーと同等（試合出場は制限される場合あり）|

### 2.2 権限マトリクス

| 機能 | オーナー | マネージャー | コーチ | プレイヤー | サブ |
|------|---------|------------|--------|----------|------|
| チーム作成/削除 | ✓ | - | - | - | - |
| メンバー招待/削除 | ✓ | ✓ | - | - | - |
| ロール変更 | ✓ | ✓(制限付き) | - | - | - |
| スケジュール作成 | ✓ | ✓ | △(提案) | △(提案) | △(提案) |
| 目標設定 | ✓ | ✓ | △(提案) | - | - |
| 戦績登録 | ✓ | ✓ | ✓ | ✓ | ✓ |
| フィードバック投稿 | ✓ | ✓ | ✓ | △(自己評価) | △(自己評価) |
| 個人分析閲覧 | ✓ | ✓ | ✓ | ✓(自分のみ) | ✓(自分のみ) |
| チーム設定変更 | ✓ | ✓ | - | - | - |

---

## 3. 機能要件

### 3.1 チーム・選手管理機能【MVP Phase 1】

#### 3.1.1 チーム管理
- **チーム作成**
  - チーム名、タグ、ロゴ画像
  - チーム説明文
  - 作成者が自動的にオーナーになる

- **チーム設定**
  - 基本情報の編集
  - チーム公開/非公開設定
  - チーム削除（オーナーのみ）

- **メンバー管理**
  - Discord招待リンクによる招待
  - メンバー一覧表示
  - ロール割り当て
  - メンバー除外
  - 加入承認フロー

#### 3.1.2 選手管理
- **選手プロフィール**
  - Discord名
  - インゲームネーム（複数登録可能）
  - アイコン画像
  - 自己紹介
  - 得意エージェント（複数選択）
  - プレイスタイル（テキスト）

- **インゲームネーム対応管理**
  - 選手とインゲームネームのマッピング
  - 同一選手の複数IGN管理
  - サブアカウント対応

#### 3.1.3 個人分析機能
- **スキル評価（5段階評価）**
  1. メカニクス
  2. エイム
  3. キャラクター理解
  4. チーム理解
  5. マップ理解

- **苦手順ソート機能**
  - 上記5項目を苦手な順に並べ替え
  - 改善すべき項目の可視化
  - 時系列での推移グラフ

- **評価入力**
  - 自己評価
  - コーチ/マネージャーによる評価
  - 評価履歴の保存

---

### 3.2 目標管理機能【MVP Phase 2】

#### 3.2.1 チーム目標
- **長期目標**
  - シーズン目標（例: 大会優勝、ランク到達）
  - 達成期限設定
  - 進捗率（%）

- **中期目標**
  - 月次目標
  - 週次目標
  - 達成/未達成ステータス

- **短期目標**
  - 日次目標
  - 練習メニュー
  - 振り返り機能

#### 3.2.2 個人目標
- 各プレイヤーの個人目標設定
- スキル別目標（エイム、立ち回り等）
- 目標と個人分析の連携

#### 3.2.3 スクリム目標管理（Do/Don't）
- **スクリムごとのやること（Do）**
  - そのスクリムで意識すること（例: エコ管理徹底、ローテーション早める）
  - 複数項目登録可能
  - 試合後の反省で振り返り

- **スクリムごとのやらないこと（Don't）**
  - そのスクリムで避けること（例: 無理なピークをしない、単独行動しない）
  - 複数項目登録可能
  - 試合後の反省で振り返り

- **スクリム後の反省機能**
  - 各Do/Don'tの達成度チェック
  - 反省コメント入力
  - 次回スクリムへの引き継ぎ

#### 3.2.4 コンディション管理
- **日次コンディション入力**
  - 総合コンディション（3段階: 良い / 普通 / 悪い）
  - コメント欄（オプション）
  - 簡単な入力で継続しやすく

- **コンディション履歴**
  - シンプルな一覧表示
  - パフォーマンスとの相関分析
  - チーム全体のコンディション一覧

#### 3.2.5 進捗管理
- **自動追跡**
  - 戦績データからの自動更新
  - 目標達成率の自動計算
  - 達成予測機能

- **手動更新**
  - 定性的な進捗コメント
  - マイルストーン達成記録
  - 課題・障壁の記録

---

### 3.3 スケジュール管理機能【MVP Phase 3】

#### 3.3.1 スケジュール種類
1. **チーム練習**
   - 日時、期間
   - 参加メンバー
   - 練習内容（テキスト）
   - 繰り返し設定（毎週○曜日等）

2. **スクリム（対外試合）**
   - 対戦相手チーム名
   - 日時
   - マップ選定
   - 参加メンバー（スタメン/サブ）
   - 事前準備事項

3. **個人練習**
   - 各プレイヤーの個人練習予定
   - 練習内容
   - 目標時間

4. **ミーティング**
   - 議題
   - 参加者
   - 議事録リンク

#### 3.3.2 スケジュール機能
- **カレンダー表示**
  - 月間ビュー
  - 週間ビュー
  - 日別ビュー
  - フィルタリング（種類、メンバー）

- **出欠管理**
  - 参加/不参加/未定
  - 不参加理由
  - リマインダー

- **通知機能**
  - スケジュール24時間前通知
  - スケジュール1時間前通知
  - Discord Webhook連携
  - メンバー参加状況変更通知

#### 3.3.3 共有範囲
- チーム内メンバーのみ閲覧可能
- 外部共有機能は不要

---

### 3.4 戦績管理機能【MVP Phase 4】

#### 3.4.1 試合結果登録

**入力方法: スクリーンショットOCR**
- リザルト画面のスクリーンショットをアップロード
- DeepSeek OCRで自動読み取り
- 読み取り項目:
  - マップ名
  - 勝敗
  - スコア（13-11等）
  - 各プレイヤーの統計:
    - インゲームネーム
    - 使用エージェント
    - ACS (Average Combat Score)
    - キル数
    - デス数
    - アシスト数
    - ファーストブラッド数（FB）
    - プラント数/解除数
    - その他リザルト画面に表示される数値

**編集機能**
- OCR読み取り後の手動修正
- 項目の追加/削除
- 画像の再アップロード

**インゲームネーム対応**
- OCRで読み取ったIGNを登録選手名に自動マッピング
- 未登録IGNの場合は手動対応を促す
- IGNマスター登録機能

#### 3.4.2 試合記録管理
- **試合一覧**
  - 日付順、勝敗フィルタ
  - マップフィルタ
  - 対戦相手フィルタ
  - スクリム/公式試合タグ

- **詳細画面**
  - スコアボード表示
  - 個人統計
  - チーム統計
  - タイムライン（あれば）

#### 3.4.3 統計・分析
- **チーム統計**
  - 総合勝率
  - マップ別勝率
  - エージェント別勝率
  - 対戦相手別戦績
  - 時系列グラフ

- **個人統計**
  - 平均K/D/A
  - 平均ACS
  - エージェント別パフォーマンス
  - マップ別パフォーマンス
  - パフォーマンス推移

- **コンディション相関**
  - コンディションとパフォーマンスの相関分析
  - ベストコンディション時の統計

---

### 3.5 コミュニケーション機能

#### 3.5.1 通知機能
- **スケジュール通知**
  - 予定の24時間前
  - 予定の1時間前
  - 出欠未回答リマインダー
  - スケジュール変更通知

- **通知チャネル**
  - Discord Webhook（推奨）
  - アプリ内通知（オプション）

#### 3.5.2 フィードバック機能

**目標に対するフィードバック**
- 目標ごとにコメント投稿
- 進捗に対するアドバイス
- 励ましメッセージ
- マネージャー/コーチから選手へ

**スクリム後フィードバック**
- **個人フィードバック**
  - 各プレイヤーへのコメント
  - 良かった点/改善点
  - 次回への課題設定
  - 評価スコア（オプション）

- **チームフィードバック**
  - チーム全体の戦術評価
  - コンビネーションの評価
  - 次回スクリムへの改善案
  - MVP選出（オプション）

**フィードバック表示**
- 試合詳細画面に紐付け
- 個人ページでまとめて確認
- フィードバック履歴

---

### 3.6 認証・セキュリティ

#### 3.6.1 認証方式
- **Discord OAuth 2.0認証**
  - プライマリ認証方式
  - Discordアカウントと連携
  - Discord名の自動取得

#### 3.6.2 セキュリティ要件
- HTTPS通信必須
- セッション管理
- CSRF対策
- XSS対策
- 画像アップロードのバリデーション
- ファイルサイズ制限
- API レートリミット

---

## 4. 非機能要件

### 4.1 パフォーマンス
- ページロード時間: 3秒以内
- OCR処理時間: 10秒以内
- 同時接続ユーザー数: 100ユーザー（初期）
- データベースレスポンス: 100ms以内

### 4.2 可用性
- 稼働率: 99%以上
- メンテナンス時間: 月1回、深夜2-4時

### 4.3 スケーラビリティ
- 将来的なユーザー増加に対応可能な設計
- データベースの水平スケーリング対応
- CDN利用による画像配信最適化

### 4.4 ブラウザ対応
- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）
- モバイルブラウザ対応

### 4.5 レスポンシブデザイン
- PC: 1920x1080以上
- タブレット: 768px以上
- スマートフォン: 375px以上

---

## 5. 外部連携

### 5.1 必須連携
- **Discord**
  - OAuth認証
  - Webhook通知
  - ユーザー情報取得

- **DeepSeek OCR API**
  - スクリーンショット解析
  - テキスト抽出

### 5.2 将来的な連携候補
- Riot Games API（公式戦績取得）
- Google Calendar（スケジュール同期）
- Notion / Slack（ドキュメント連携）

---

## 6. データモデル概要

### 6.1 主要エンティティ
1. **User（ユーザー）**
   - Discord ID
   - 表示名
   - プロフィール情報

2. **Team（チーム）**
   - チーム名
   - タグ
   - 設定情報

3. **TeamMember（チームメンバー）**
   - User x Team の関連
   - ロール
   - 加入日

4. **Player（選手）**
   - User の拡張
   - インゲームネーム
   - スキル評価

5. **Match（試合）**
   - 日時
   - マップ
   - 勝敗
   - スコア

6. **MatchPlayer（試合参加者）**
   - Match x Player
   - 統計情報（K/D/A等）

7. **Goal（目標）**
   - タイプ（チーム/個人）
   - 期間
   - 内容
   - 進捗

8. **Schedule（スケジュール）**
   - 種類
   - 日時
   - 参加者

9. **ScrimObjective（スクリム目標）**
   - Schedule に紐づく
   - Do/Don't リスト
   - 達成状況

10. **Feedback（フィードバック）**
    - 対象（試合/目標/個人）
    - 内容
    - 投稿者

11. **Condition（コンディション）**
    - 日付
    - Player
    - コンディションスコア（3段階）

---

## 7. MVP開発フェーズ

### Phase 1: チーム・選手管理【優先度: 最高】
**期間**: 2-3週間
- ユーザー認証（Discord OAuth）
- チーム作成・管理
- メンバー招待・管理
- 選手プロフィール
- 個人分析機能
- ロール・権限管理

**成果物**:
- ユーザーがチームを作成し、メンバーを招待できる
- 個人分析が入力・表示できる

### Phase 2: 目標管理【優先度: 高】
**期間**: 2-3週間
- チーム目標設定
- 個人目標設定
- 日次ルール（Do/Don't）
- コンディション管理
- 進捗追跡UI

**成果物**:
- チーム・個人の目標が設定・追跡できる
- 日次のコンディションが記録できる

### Phase 3: スケジュール管理【優先度: 高】
**期間**: 2週間
- カレンダーUI
- スケジュール登録（4種類）
- 出欠管理
- Discord通知連携

**成果物**:
- チームスケジュールが管理できる
- Discord通知が機能する

### Phase 4: 戦績管理【優先度: 中】
**期間**: 3-4週間
- スクリーンショットアップロード
- DeepSeek OCR統合
- IGN自動マッピング
- 試合記録編集
- 基本統計表示

**成果物**:
- スクリーンショットから試合結果が自動登録できる
- 戦績統計が閲覧できる

### Phase 5: 分析・フィードバック【優先度: 中】
**期間**: 2週間
- 高度な統計分析
- フィードバック機能
- コンディション相関分析
- ダッシュボード

**成果物**:
- フィードバックの投稿・閲覧ができる
- 詳細な統計分析ができる

---

## 8. 技術スタック候補

### 8.1 フロントエンド
- **候補1**: React + TypeScript + Vite
- **候補2**: Next.js 14+ (App Router)
- **候補3**: Vue 3 + TypeScript

### 8.2 バックエンド
- **候補1**: Node.js + Express + TypeScript
- **候補2**: Next.js API Routes (フルスタック)
- **候補3**: Python + FastAPI

### 8.3 データベース
- **候補1**: PostgreSQL + Prisma ORM
- **候補2**: MongoDB + Mongoose
- **候補3**: Supabase（PostgreSQL + Auth + Storage）

### 8.4 認証
- **Discord OAuth 2.0**
- NextAuth.js / Passport.js / Auth0

### 8.5 ファイルストレージ
- **候補1**: AWS S3
- **候補2**: Cloudflare R2
- **候補3**: Supabase Storage

### 8.6 OCR
- **DeepSeek OCR API**（必須）

### 8.7 通知
- **Discord Webhooks**

### 8.8 デプロイ
- **候補1**: Vercel（フロント + API）
- **候補2**: Railway / Render（バックエンド）
- **候補3**: AWS（EC2/ECS）

---

## 9. UI/UX要件

### 9.1 デザインテーマ
- **カラースキーム**: Valorant公式に近い配色（赤・黒・白ベース）
- **ダークモード**: 対応必須
- **フォント**: 可読性重視、ゲーミングテイスト

### 9.2 主要画面
1. **ダッシュボード**
   - 今日のスケジュール
   - 最近の試合結果
   - チーム目標進捗
   - コンディション入力

2. **チーム管理画面**
   - メンバー一覧
   - 個人分析一覧
   - チーム設定

3. **目標管理画面**
   - 長期/中期/短期目標
   - 進捗グラフ
   - 日次ルール

4. **スケジュール画面**
   - カレンダービュー
   - 予定詳細
   - 出欠状況

5. **戦績画面**
   - 試合一覧
   - 統計ダッシュボード
   - 試合詳細

6. **個人ページ**
   - 自分の統計
   - 受けたフィードバック
   - 個人目標

### 9.3 ユーザビリティ
- 直感的なナビゲーション
- モバイルフレンドリー
- アクセシビリティ対応（WCAG 2.1 AA準拠）
- ローディング状態の明示
- エラーメッセージの明確化

---

## 10. 制約事項・前提条件

### 10.1 制約事項
- Riot Games APIの利用は公式に許可されている範囲のみ
- OCR精度に限界があるため、手動修正機能は必須
- 初期リリースは日本語のみ対応

### 10.2 前提条件
- ユーザーはDiscordアカウントを持っている
- ユーザーはValorantのプレイ経験がある
- スクリーンショットは標準解像度で撮影される

### 10.3 スコープ外
- ボイスチャット機能
- ビデオ分析機能
- 自動戦術分析AI
- 大会運営機能
- 賞金管理機能
- 他のゲームタイトル対応

---

## 11. リスクと対策

### 11.1 技術的リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| OCR精度の低さ | 高 | 手動編集機能、IGN学習機能 |
| DeepSeek API障害 | 中 | 代替OCRサービスの検討、手動入力フォールバック |
| Discord API変更 | 中 | 定期的なAPI仕様確認、エラーハンドリング強化 |
| スケーラビリティ | 低 | 初期段階から拡張性を考慮した設計 |

### 11.2 ビジネスリスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| ユーザー獲得難航 | 高 | β版での小規模テスト、SNS活用 |
| 競合サービスの登場 | 中 | 独自機能の強化、コミュニティ構築 |
| 運用コスト超過 | 中 | 初期段階でのコスト試算、段階的機能追加 |

---

## 12. 次のステップ

### 12.1 要件定義完了後のタスク
1. ✅ 技術スタック最終決定
2. ✅ データベース詳細設計
3. ✅ API設計（エンドポイント定義）
4. ✅ UI/UXワイヤーフレーム作成
5. ⬜ 開発環境構築
6. ⬜ MVP Phase 1 開発開始

### 12.2 確認事項・未決定事項
- [ ] プロジェクト名の正式決定
- [ ] ドメイン名の決定
- [ ] 利用規約・プライバシーポリシーの作成タイミング
- [ ] β版テストユーザーの募集方法
- [ ] マネタイズ戦略（無料 or 有料プラン）

---

## 13. 付録

### 13.1 用語集

| 用語 | 説明 |
|------|------|
| IGN | In-Game Name（ゲーム内名） |
| ACS | Average Combat Score |
| K/D/A | Kill / Death / Assist |
| スクリム | Scrimmage（練習試合） |
| MVP | Most Valuable Player |
| OCR | Optical Character Recognition（光学文字認識）|

### 13.2 参考資料
- Valorant公式サイト
- Discord Developer Portal
- DeepSeek OCR ドキュメント

---

## 変更履歴

| バージョン | 日付 | 変更内容 | 作成者 |
|-----------|------|---------|--------|
| 1.0 | 2025-11-15 | 初版作成 | Claude AI |

---

**このドキュメントに関する質問・提案は、GitHubのIssueまたはDiscussionでお願いします。**
